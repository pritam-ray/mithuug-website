import{c as I,j as e,X as F,u as z,r,t as B,s as S}from"./index-DDPWc_ZQ.js";import{P as G,a as H}from"./ProductCardSkeleton-WF6c2fyK.js";import{S as O}from"./SEO-BeZmPqYZ.js";import{T as M}from"./tag-Bv95X67e.js";import{P as Q}from"./package-BRHkGikc.js";import{D as $}from"./dollar-sign-BBIcdTZI.js";import{S as U}from"./star-B8AD6aH5.js";import{F as X}from"./filter-DZGSjmPs.js";import{S as Z}from"./search-CAyVW2CM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=I("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),K=({isOpen:c,onClose:y,categories:m,selectedCategory:u,onCategoryChange:p,priceRange:d,onPriceRangeChange:i,sortBy:f,onSortChange:l,showInStock:w=!1,onInStockChange:a,showNewOnly:k=!1,onNewOnlyChange:h})=>e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:y}),e.jsx("aside",{className:`fixed lg:sticky top-0 left-0 h-screen lg:h-auto w-80 bg-white shadow-xl z-50 transition-transform duration-300 overflow-y-auto ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"} lg:top-24`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"w-5 h-5 text-ochre"}),e.jsx("h2",{className:"text-xl font-playfair font-bold text-chocolate",children:"Filters"})]}),e.jsx("button",{onClick:y,className:"lg:hidden p-2 hover:bg-ochre-50 rounded-full transition-colors",children:e.jsx(F,{className:"w-5 h-5 text-chocolate"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-chocolate-700 mb-3",children:[e.jsx(M,{className:"w-4 h-4 text-ochre"}),e.jsx("span",{children:"Sort By"})]}),e.jsxs("select",{value:f,onChange:t=>l(t.target.value),className:"w-full px-4 py-3 border-2 border-ochre-200 rounded-lg focus:border-ochre focus:ring-2 focus:ring-ochre-200 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A-Z"}),e.jsx("option",{value:"popular",children:"Most Popular"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-chocolate-700 mb-3",children:[e.jsx(Q,{className:"w-4 h-4 text-ochre"}),e.jsx("span",{children:"Categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>p("all"),className:`w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ${u==="all"?"bg-gradient-mitthuug text-white shadow-mitthuug":"bg-ochre-50 text-chocolate-700 hover:bg-ochre-100"}`,children:"All Products"}),m.map(t=>e.jsx("button",{onClick:()=>p(t.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ${u===t.id?"bg-gradient-mitthuug text-white shadow-mitthuug":"bg-ochre-50 text-chocolate-700 hover:bg-ochre-100"}`,children:t.name},t.id))]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-chocolate-700 mb-3",children:[e.jsx($,{className:"w-4 h-4 text-ochre"}),e.jsx("span",{children:"Price Range"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",value:d[0],onChange:t=>i([parseInt(t.target.value)||0,d[1]]),className:"w-full px-3 py-2 border-2 border-ochre-200 rounded-lg focus:border-ochre focus:ring-2 focus:ring-ochre-200 transition-all",placeholder:"Min"}),e.jsx("span",{className:"text-chocolate-600 font-semibold",children:"-"}),e.jsx("input",{type:"number",value:d[1],onChange:t=>i([d[0],parseInt(t.target.value)||1e3]),className:"w-full px-3 py-2 border-2 border-ochre-200 rounded-lg focus:border-ochre focus:ring-2 focus:ring-ochre-200 transition-all",placeholder:"Max"})]}),e.jsxs("div",{className:"text-sm text-chocolate-600 text-center",children:["₹",d[0]," - ₹",d[1]]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>i([0,250]),className:"px-3 py-2 bg-ochre-50 text-chocolate-700 rounded-lg hover:bg-ochre-100 transition-colors text-sm font-semibold",children:"Under ₹250"}),e.jsx("button",{onClick:()=>i([250,500]),className:"px-3 py-2 bg-ochre-50 text-chocolate-700 rounded-lg hover:bg-ochre-100 transition-colors text-sm font-semibold",children:"₹250 - ₹500"}),e.jsx("button",{onClick:()=>i([500,1e3]),className:"px-3 py-2 bg-ochre-50 text-chocolate-700 rounded-lg hover:bg-ochre-100 transition-colors text-sm font-semibold",children:"₹500 - ₹1000"}),e.jsx("button",{onClick:()=>i([1e3,5e3]),className:"px-3 py-2 bg-ochre-50 text-chocolate-700 rounded-lg hover:bg-ochre-100 transition-colors text-sm font-semibold",children:"Over ₹1000"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-chocolate-700 mb-3",children:[e.jsx(U,{className:"w-4 h-4 text-ochre"}),e.jsx("span",{children:"Quick Filters"})]}),e.jsxs("div",{className:"space-y-3",children:[a&&e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:t=>a(t.target.checked),className:"w-5 h-5 text-ochre border-2 border-ochre-300 rounded focus:ring-ochre"}),e.jsx("span",{className:"text-chocolate-700 group-hover:text-ochre transition-colors",children:"In Stock Only"})]}),h&&e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:t=>h(t.target.checked),className:"w-5 h-5 text-ochre border-2 border-ochre-300 rounded focus:ring-ochre"}),e.jsx("span",{className:"text-chocolate-700 group-hover:text-ochre transition-colors",children:"New Arrivals Only"})]})]})]}),e.jsx("button",{onClick:()=>{p("all"),i([0,1e3]),l("newest"),a&&a(!1),h&&h(!1)},className:"w-full px-6 py-3 border-2 border-ochre text-ochre font-semibold rounded-lg hover:bg-ochre hover:text-white transition-all duration-300",children:"Clear All Filters"})]})})]}),oe=()=>{const[c,y]=z(),[m,u]=r.useState([]),[p,d]=r.useState([]),[i,f]=r.useState(!0),[l,w]=r.useState(""),[a,k]=r.useState(c.get("category")||"all"),[h,t]=r.useState("newest"),[N,T]=r.useState([0,1e3]),[C,P]=r.useState(!1),[b,D]=r.useState(!1),[g,E]=r.useState(!1),[v,L]=r.useState(null);r.useEffect(()=>{q()},[]),r.useEffect(()=>{A()},[a,h,l,N,b,g]),r.useEffect(()=>{if(l&&l.length>2){v&&clearTimeout(v);const s=setTimeout(()=>{B(l)},1e3);L(s)}return()=>{v&&clearTimeout(v)}},[l]);const q=async()=>{try{const[{data:s},{data:j}]=await Promise.all([S.from("products").select("*"),S.from("categories").select("*")]);s&&u(s),j&&d(j)}catch(s){console.error("Error loading data:",s)}finally{f(!1)}},A=async()=>{f(!0);try{let s=S.from("products").select("*");a!=="all"&&(s=s.eq("category",a)),c.get("filter")==="new"||g?s=s.eq("is_new",!0):c.get("filter")==="bestsellers"&&(s=s.eq("is_bestseller",!0)),b&&(s=s.gt("stock_quantity",0)),s=s.gte("price",N[0]).lte("price",N[1]);const{data:j}=await s;if(j){let x=j;switch(l&&(x=x.filter(o=>o.name.toLowerCase().includes(l.toLowerCase())||o.description.toLowerCase().includes(l.toLowerCase()))),h){case"price-low":x.sort((o,n)=>o.price-n.price);break;case"price-high":x.sort((o,n)=>n.price-o.price);break;case"name":x.sort((o,n)=>o.name.localeCompare(n.name));break;case"popular":case"bestsellers":x.sort((o,n)=>(n.is_bestseller?1:0)-(o.is_bestseller?1:0));break;case"newest":default:x.sort((o,n)=>new Date(n.created_at).getTime()-new Date(o.created_at).getTime())}u(x)}}catch(s){console.error("Error filtering products:",s)}finally{f(!1)}},_=s=>{k(s),s==="all"?c.delete("category"):c.set("category",s),y(c)};return e.jsxs("div",{className:"min-h-screen pt-20 bg-ivory",children:[e.jsx(O,{title:"Shop Premium Til-Gud Sweets | MitthuuG",description:"Browse our collection of authentic handcrafted Til-Gud, traditional Indian sweets, and festive treats. All-natural ingredients, no preservatives. Free shipping on orders above ₹500.",keywords:"buy til gud online, tilgul sweets, indian sweets online, traditional sweets, sesame jaggery ladoo, makar sankranti sweets, order sweets online"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-playfair font-bold text-chocolate mb-4",children:"Shop Our Collection"}),e.jsx("p",{className:"text-lg text-chocolate-600 max-w-2xl mx-auto",children:"Handcrafted GUD Bites made with love, sesame, and pure jaggery"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx(K,{isOpen:C,onClose:()=>P(!1),categories:p.map(s=>({id:s.slug,name:s.name})),selectedCategory:a,onCategoryChange:_,priceRange:N,onPriceRangeChange:T,sortBy:h,onSortChange:t,showInStock:b,onInStockChange:D,showNewOnly:g,onNewOnlyChange:E}),e.jsx("button",{onClick:()=>P(!C),className:"lg:hidden fixed bottom-6 right-6 bg-ochre text-white p-4 rounded-full shadow-2xl z-50 hover:bg-ochre-600 transition-all",children:e.jsx(X,{className:"w-6 h-6"})}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"mb-6 bg-white rounded-xl p-4 shadow-md border-2 border-ochre-100",children:e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-chocolate-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:l,onChange:s=>w(s.target.value),className:"w-full pl-12 pr-12 py-3 border-2 border-ochre-200 rounded-lg focus:border-ochre focus:ring-2 focus:ring-ochre-200 transition-all"}),l&&e.jsx("button",{onClick:()=>w(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-chocolate-400 hover:text-ochre transition-colors",children:e.jsx(F,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("p",{className:"text-chocolate-600 font-semibold",children:[m.length," ",m.length===1?"Product":"Products"," Found"]}),(b||g||a!=="all")&&e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-olive/10 text-olive rounded-full text-sm font-semibold",children:"In Stock"}),g&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-ochre/10 text-ochre rounded-full text-sm font-semibold",children:"New Arrivals"})]})]}),i?e.jsx(G,{count:6}):m.length===0?e.jsxs("div",{className:"text-center py-24 bg-white rounded-2xl border-2 border-ochre-100",children:[e.jsx("p",{className:"text-chocolate-600 text-lg font-playfair mb-4",children:"No products found"}),e.jsx("p",{className:"text-chocolate-500 text-sm",children:"Try adjusting your filters or search query"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map(s=>e.jsx(H,{product:s},s.id))})]})]})]})]})};export{oe as default};
