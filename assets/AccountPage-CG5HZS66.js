import{c as g,h as b,v as f,q as w,r as n,s as h,j as e,L as r,m as S,U as _,H as A}from"./index-DDPWc_ZQ.js";import{S as O}from"./SEO-BeZmPqYZ.js";import{P as L}from"./package-BRHkGikc.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=g("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=g("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),z=()=>{const{user:a,profile:t,signOut:m}=b(),{isAdmin:u}=f(),c=w(),[d,p]=n.useState([]),[i,y]=n.useState([]),[j,N]=n.useState(!0);n.useEffect(()=>{if(!a){c("/login");return}k()},[a,c]);const k=async()=>{if(a)try{const[s,l]=await Promise.all([h.from("orders").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(5),h.from("wishlist_items").select("*, product:products(*)").eq("user_id",a.id)]);s.data&&p(s.data),l.data&&y(l.data)}catch(s){console.error("Error loading data:",s)}finally{N(!1)}},v=async()=>{await m(),c("/")};return j?e.jsx("div",{className:"min-h-screen pt-20 flex items-center justify-center bg-white dark:bg-gray-900",children:e.jsx("div",{className:"text-stone-600 dark:text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen pt-20 bg-stone-50 dark:bg-gray-900",children:[e.jsx(O,{title:"My Account | MitthuuG",description:"Manage your MitthuuG account, view orders, track shipments, and update your profile settings.",keywords:"my account, order history, profile settings, mitthuug account"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-light tracking-tight text-stone-900 dark:text-gray-100 mb-2",children:"My Account"}),e.jsxs("p",{className:"text-stone-600 dark:text-gray-400",children:["Welcome back, ",(t==null?void 0:t.full_name)||"there","!"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsx("aside",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 space-y-2",children:[u&&e.jsxs(r,{to:"/admin",className:"flex items-center space-x-3 px-4 py-3 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Admin Dashboard"})]}),e.jsxs(r,{to:"/account",className:"flex items-center space-x-3 px-4 py-3 rounded-lg bg-stone-100 dark:bg-gray-700 text-stone-900 dark:text-gray-100",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(r,{to:"/account/orders",className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-stone-100 dark:hover:bg-gray-700 text-stone-600 dark:text-gray-400 hover:text-stone-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(r,{to:"/account/wishlist",className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-stone-100 dark:hover:bg-gray-700 text-stone-600 dark:text-gray-400 hover:text-stone-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Wishlist"})]}),e.jsxs(r,{to:"/account/settings",className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-stone-100 dark:hover:bg-gray-700 text-stone-600 dark:text-gray-400 hover:text-stone-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:v,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"Sign Out"})]})]})}),e.jsxs("main",{className:"lg:col-span-3 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:[e.jsx("h2",{className:"text-2xl font-light text-stone-900 dark:text-gray-100 mb-6",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-stone-600 dark:text-gray-400",children:"Full Name"}),e.jsx("p",{className:"text-lg text-stone-900 dark:text-gray-100",children:(t==null?void 0:t.full_name)||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-stone-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-lg text-stone-900 dark:text-gray-100",children:a==null?void 0:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-stone-600 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-lg text-stone-900 dark:text-gray-100",children:(t==null?void 0:t.phone)||"Not set"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-light text-stone-900 dark:text-gray-100",children:"Recent Orders"}),e.jsx(r,{to:"/account/orders",className:"text-stone-600 dark:text-gray-400 hover:text-stone-900 dark:hover:text-gray-100",children:"View All"})]}),d.length===0?e.jsx("p",{className:"text-stone-600 dark:text-gray-400 text-center py-8",children:"No orders yet"}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-stone-200 dark:border-gray-700 rounded-lg hover:border-stone-400 dark:hover:border-gray-600 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-stone-900 dark:text-gray-100",children:s.order_number}),e.jsx("p",{className:"text-sm text-stone-600 dark:text-gray-400",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-stone-900 dark:text-gray-100",children:["â‚¹",s.total_amount]}),e.jsx("p",{className:"text-sm text-stone-600 dark:text-gray-400 capitalize",children:s.status})]})]},s.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-light text-stone-900 dark:text-gray-100",children:"Wishlist"}),e.jsx(r,{to:"/account/wishlist",className:"text-stone-600 dark:text-gray-400 hover:text-stone-900 dark:hover:text-gray-100",children:"View All"})]}),i.length===0?e.jsx("p",{className:"text-stone-600 dark:text-gray-400 text-center py-8",children:"No items in wishlist"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.slice(0,4).map(s=>{var l,o,x;return e.jsxs(r,{to:`/product/${s.product_id}`,className:"group",children:[e.jsx("img",{src:(l=s.product)==null?void 0:l.image_url,alt:(o=s.product)==null?void 0:o.name,className:"w-full aspect-square object-cover rounded-lg mb-2 group-hover:opacity-75 transition-opacity"}),e.jsx("p",{className:"text-sm text-stone-900 dark:text-gray-100 line-clamp-1",children:(x=s.product)==null?void 0:x.name})]},s.id)})})]})]})]})]})]})};export{z as default};
