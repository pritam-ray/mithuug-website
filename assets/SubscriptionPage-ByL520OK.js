import{c as u,D as k,r as o,j as e,L as p,X as P,T as z}from"./index-DDPWc_ZQ.js";import{S as M}from"./SEO-BeZmPqYZ.js";import{P as _}from"./package-BRHkGikc.js";import{R as L}from"./refresh-cw-BwAPxEDS.js";import{C as R}from"./calendar-C5LQugoM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=u("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),B=()=>{const{subscriptions:i,loading:g,pauseSubscription:b,resumeSubscription:j,cancelSubscription:f,deleteSubscription:y}=k(),[v,a]=o.useState(!1),[n,c]=o.useState(null),[d,r]=o.useState(""),N=(t,s)=>{switch(t){case"weekly":return"Weekly";case"biweekly":return"Every 2 Weeks";case"monthly":return"Monthly";case"custom":return s?`Every ${s} days`:"Custom";default:return t}},w=t=>{const s={active:{bg:"bg-green-100",text:"text-green-700"},paused:{bg:"bg-yellow-100",text:"text-yellow-700"},cancelled:{bg:"bg-red-100",text:"text-red-700"},expired:{bg:"bg-gray-100",text:"text-gray-700"}},l=s[t]||s.active;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${l.bg} ${l.text} uppercase`,children:t})},S=t=>{c(t),a(!0)},C=async()=>{n&&(await f(n,d),a(!1),c(null),r(""))};return g?e.jsx("div",{className:"min-h-screen pt-20 bg-ivory flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-ochre mx-auto mb-4"}),e.jsx("p",{className:"text-chocolate-600",children:"Loading subscriptions..."})]})}):e.jsxs("div",{className:"min-h-screen pt-20 bg-ivory",children:[e.jsx(M,{title:"My Subscriptions - MitthuuG",description:"Manage your subscription orders"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-playfair font-bold text-chocolate-900",children:"My Subscriptions"}),e.jsx("p",{className:"text-chocolate-600 mt-2",children:"Manage your recurring deliveries and save 10%"})]}),e.jsx(p,{to:"/shop",className:"bg-ochre text-white px-6 py-3 rounded-lg hover:bg-ochre-600 transition-colors",children:"Browse Products"})]}),i.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-16 text-center",children:[e.jsx(_,{size:64,className:"mx-auto text-chocolate-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-playfair font-bold text-chocolate-900 mb-2",children:"No Active Subscriptions"}),e.jsx("p",{className:"text-chocolate-600 mb-6",children:"Subscribe & save 10% on your favorite products with auto-delivery"}),e.jsx(p,{to:"/shop",className:"inline-block bg-ochre text-white px-8 py-3 rounded-lg hover:bg-ochre-600 transition-colors",children:"Start Subscribing"})]}):e.jsx("div",{className:"grid gap-6",children:i.map(t=>{var s,l,x,h,m;return e.jsx("div",{className:"bg-white rounded-xl p-6 border-2 border-chocolate-200 hover:border-ochre transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("img",{src:((l=(s=t.product)==null?void 0:s.images)==null?void 0:l[0])||((x=t.product)==null?void 0:x.image_url),alt:(h=t.product)==null?void 0:h.name,className:"w-full md:w-32 h-32 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-chocolate-900",children:(m=t.product)==null?void 0:m.name}),e.jsxs("p",{className:"text-sm text-chocolate-600",children:["Quantity: ",t.quantity]})]}),w(t.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-chocolate-500",children:"Frequency"}),e.jsxs("p",{className:"font-semibold text-chocolate-900 flex items-center gap-1",children:[e.jsx(L,{size:14}),N(t.frequency,t.custom_interval_days)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-chocolate-500",children:"Next Delivery"}),e.jsxs("p",{className:"font-semibold text-chocolate-900 flex items-center gap-1",children:[e.jsx(R,{size:14}),new Date(t.next_delivery_date).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-chocolate-500",children:"Discount"}),e.jsxs("p",{className:"font-semibold text-green-600",children:[t.discount_percentage,"% off"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-chocolate-500",children:"Total Orders"}),e.jsx("p",{className:"font-semibold text-chocolate-900",children:t.total_orders_created})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.status==="active"&&e.jsxs("button",{onClick:()=>b(t.id),className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-sm",children:[e.jsx(D,{size:16}),"Pause"]}),t.status==="paused"&&e.jsxs("button",{onClick:()=>j(t.id),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(E,{size:16}),"Resume"]}),(t.status==="active"||t.status==="paused")&&e.jsxs("button",{onClick:()=>S(t.id),className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:[e.jsx(P,{size:16}),"Cancel"]}),t.status==="cancelled"&&e.jsxs("button",{onClick:()=>y(t.id),className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:[e.jsx(z,{size:16}),"Delete"]})]})]})]})},t.id)})})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-playfair font-bold text-chocolate-900 mb-4",children:"Cancel Subscription"}),e.jsx("p",{className:"text-chocolate-600 mb-4",children:"We're sorry to see you go. Please tell us why you're cancelling (optional):"}),e.jsx("textarea",{value:d,onChange:t=>r(t.target.value),className:"w-full px-4 py-3 border-2 border-chocolate-200 rounded-lg focus:border-ochre focus:outline-none mb-6",rows:4,placeholder:"Your feedback helps us improve..."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{a(!1),c(null),r("")},className:"flex-1 px-6 py-3 border-2 border-chocolate-200 text-chocolate-700 rounded-lg hover:bg-chocolate-50 transition-colors",children:"Keep Subscription"}),e.jsx("button",{onClick:C,className:"flex-1 px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Cancel Subscription"})]})]})})]})};export{B as default};
