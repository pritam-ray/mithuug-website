import{c as j,q as y,v,r as l,j as e,O as N,M as _,s as S}from"./index-DDPWc_ZQ.js";import{C}from"./credit-card-wXooDei1.js";import{T as k}from"./truck-J9eVq9qq.js";import{S as w}from"./save-Sf0pIYD6.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),G=()=>{const d=y(),{isAdmin:m,isSuperAdmin:c,isLoading:n}=v(),[t,u]=l.useState({site_name:"MitthuuG",site_description:"Premium Til-Gud Bites | Handcrafted Daily",contact_email:"contact@mitthuug.com",contact_phone:"8209349602",support_email:"support@mitthuug.com",shipping_fee:50,free_shipping_threshold:500,tax_rate:5,razorpay_key_id:"",razorpay_key_secret:""}),[a,o]=l.useState("general"),[p,x]=l.useState(!1),[h,i]=l.useState("");l.useEffect(()=>{!n&&!m&&d("/")},[m,n,d]);const r=(s,g)=>{u(f=>({...f,[s]:g}))},b=async()=>{try{x(!0),i(""),console.log("Saving settings:",t),await S.rpc("log_admin_activity",{p_action:"update_settings",p_details:{settings:t}}),i("Settings saved successfully!"),setTimeout(()=>i(""),3e3)}catch(s){console.error("Error saving settings:",s),alert("Failed to save settings")}finally{x(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ochre"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-chocolate-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-chocolate-600",children:"Manage your store configuration and preferences"})]}),h&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:h}),e.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:e.jsxs("div",{className:"flex border-b border-chocolate-200 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>o("general"),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${a==="general"?"border-b-2 border-ochre text-ochre":"text-chocolate-600 hover:text-chocolate-900"}`,children:[e.jsx(N,{size:20}),"General"]}),e.jsxs("button",{onClick:()=>o("payment"),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${a==="payment"?"border-b-2 border-ochre text-ochre":"text-chocolate-600 hover:text-chocolate-900"}`,children:[e.jsx(C,{size:20}),"Payment"]}),e.jsxs("button",{onClick:()=>o("shipping"),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${a==="shipping"?"border-b-2 border-ochre text-ochre":"text-chocolate-600 hover:text-chocolate-900"}`,children:[e.jsx(k,{size:20}),"Shipping"]}),e.jsxs("button",{onClick:()=>o("email"),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${a==="email"?"border-b-2 border-ochre text-ochre":"text-chocolate-600 hover:text-chocolate-900"}`,children:[e.jsx(_,{size:20}),"Email"]}),e.jsxs("button",{onClick:()=>o("tax"),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors ${a==="tax"?"border-b-2 border-ochre text-ochre":"text-chocolate-600 hover:text-chocolate-900"}`,children:[e.jsx(z,{size:20}),"Tax"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[a==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-chocolate-900 mb-4",children:"General Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Site Name"}),e.jsx("input",{type:"text",value:t.site_name,onChange:s=>r("site_name",s.target.value),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Site Description"}),e.jsx("textarea",{value:t.site_description,onChange:s=>r("site_description",s.target.value),rows:3,className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Contact Email"}),e.jsx("input",{type:"email",value:t.contact_email,onChange:s=>r("contact_email",s.target.value),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:t.contact_phone,onChange:s=>r("contact_phone",s.target.value),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"})]})]}),a==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-chocolate-900 mb-4",children:"Payment Settings"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg mb-6",children:[e.jsx("p",{className:"font-semibold",children:"⚠️ Security Notice"}),e.jsx("p",{className:"text-sm",children:"Payment credentials should be stored as environment variables in Supabase, not in the database."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Razorpay Key ID"}),e.jsx("input",{type:"text",value:t.razorpay_key_id,onChange:s=>r("razorpay_key_id",s.target.value),placeholder:"rzp_live_xxxxxxxxxx",className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent",disabled:!c}),!c&&e.jsx("p",{className:"text-sm text-chocolate-500 mt-1",children:"Only super admins can modify payment settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Razorpay Key Secret"}),e.jsx("input",{type:"password",value:t.razorpay_key_secret,onChange:s=>r("razorpay_key_secret",s.target.value),placeholder:"••••••••••••••••",className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent",disabled:!c}),!c&&e.jsx("p",{className:"text-sm text-chocolate-500 mt-1",children:"Only super admins can modify payment settings"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Current Configuration"}),e.jsx("p",{className:"text-sm mt-2",children:"Payment Gateway: Razorpay"}),e.jsx("p",{className:"text-sm",children:"Status: Configured via environment variables"}),e.jsx("p",{className:"text-sm",children:"Location: Supabase Edge Functions"})]})]}),a==="shipping"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-chocolate-900 mb-4",children:"Shipping Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Standard Shipping Fee (₹)"}),e.jsx("input",{type:"number",value:t.shipping_fee,onChange:s=>r("shipping_fee",parseFloat(s.target.value)),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Free Shipping Threshold (₹)"}),e.jsx("input",{type:"number",value:t.free_shipping_threshold,onChange:s=>r("free_shipping_threshold",parseFloat(s.target.value)),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"}),e.jsx("p",{className:"text-sm text-chocolate-500 mt-1",children:"Orders above this amount qualify for free shipping"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Shipping Zones"}),e.jsxs("p",{className:"text-sm mt-2",children:["All India: ₹",t.shipping_fee]}),e.jsxs("p",{className:"text-sm",children:["Free Shipping: Orders above ₹",t.free_shipping_threshold]})]})]}),a==="email"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-chocolate-900 mb-4",children:"Email Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"Support Email"}),e.jsx("input",{type:"email",value:t.support_email,onChange:s=>r("support_email",s.target.value),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"}),e.jsx("p",{className:"text-sm text-chocolate-500 mt-1",children:"Customer support inquiries will be sent to this email"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 text-purple-800 px-4 py-3 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Email Templates"}),e.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[e.jsx("p",{children:"• Order Confirmation"}),e.jsx("p",{children:"• Shipping Notification"}),e.jsx("p",{children:"• Delivery Confirmation"}),e.jsx("p",{children:"• Password Reset"}),e.jsx("p",{children:"• Welcome Email"})]}),e.jsx("p",{className:"text-sm mt-2 italic",children:"Managed via Supabase Auth settings"})]})]}),a==="tax"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-chocolate-900 mb-4",children:"Tax Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-chocolate-700 font-medium mb-2",children:"GST/Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:t.tax_rate,onChange:s=>r("tax_rate",parseFloat(s.target.value)),className:"w-full px-4 py-2 border border-chocolate-300 rounded-lg focus:ring-2 focus:ring-ochre focus:border-transparent"}),e.jsx("p",{className:"text-sm text-chocolate-500 mt-1",children:"Applied to all taxable products"})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 text-orange-800 px-4 py-3 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Tax Information"}),e.jsx("p",{className:"text-sm mt-2",children:"GST Number: (Add your GST number)"}),e.jsx("p",{className:"text-sm",children:"Tax Type: Inclusive"}),e.jsxs("p",{className:"text-sm",children:["Current Rate: ",t.tax_rate,"%"]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-chocolate-200",children:e.jsxs("button",{onClick:b,disabled:p,className:"flex items-center gap-2 bg-ochre text-white px-6 py-3 rounded-lg hover:bg-ochre-600 transition-colors disabled:opacity-50",children:[e.jsx(w,{size:20}),p?"Saving...":"Save Settings"]})})]})]})};export{G as default};
