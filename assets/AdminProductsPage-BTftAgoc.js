import{c as w,q as S,v as k,r,s as u,j as e,F as P,T as C}from"./index-DDPWc_ZQ.js";import{S as L}from"./search-CAyVW2CM.js";import{P as q}from"./package-BRHkGikc.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);function M(){const n=S(),{isAdmin:l,isLoading:i}=k(),[o,h]=r.useState([]),[y,p]=r.useState(!0),[d,f]=r.useState(""),[x,j]=r.useState("all");r.useEffect(()=>{!i&&!l&&n("/")},[l,i,n]),r.useEffect(()=>{l&&b()},[l]);const b=async()=>{try{const{data:t,error:s}=await u.from("products").select("*").order("created_at",{ascending:!1});if(s)throw s;h(t||[])}catch(t){console.error("Error loading products:",t)}finally{p(!1)}},N=async(t,s)=>{if(confirm(`Are you sure you want to delete "${s}"?`))try{const{error:a}=await u.from("products").delete().eq("id",t);if(a)throw a;h(o.filter(c=>c.id!==t)),alert("Product deleted successfully!")}catch(a){console.error("Error deleting product:",a),alert("Failed to delete product")}},m=o.filter(t=>{var c,g;const s=((c=t.name)==null?void 0:c.toLowerCase().includes(d.toLowerCase()))||((g=t.sku)==null?void 0:g.toLowerCase().includes(d.toLowerCase())),a=x==="all"||t.category===x;return s&&a}),v=Array.from(new Set(o.map(t=>t.category)));return i||y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ochre"})}):l?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-chocolate-900 mb-2",children:"Products Management"}),e.jsx("p",{className:"text-chocolate-600",children:"Manage your product inventory"})]}),e.jsxs("button",{onClick:()=>n("/admin/products/new"),className:"flex items-center gap-2 bg-ochre text-white px-6 py-3 rounded-lg hover:bg-ochre-600 transition-colors",children:[e.jsx(P,{size:20}),"Add New Product"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:d,onChange:t=>f(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ochre-500 focus:border-transparent"})]}),e.jsxs("select",{value:x,onChange:t=>j(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ochre-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"SKU"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Price"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Stock"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.image_url,alt:t.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-chocolate-900",children:t.name||t.title}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[t.is_bestseller&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"Bestseller"}),t.is_new&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"New"})]})]})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:t.sku}),e.jsxs("td",{className:"py-3 px-4 text-sm font-semibold text-gray-900",children:["â‚¹",t.price.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-sm font-medium ${t.stock_quantity<10?"text-red-600":t.stock_quantity<50?"text-yellow-600":"text-green-600"}`,children:t.stock_quantity})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:t.category}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.stock_quantity>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.stock_quantity>0?"In Stock":"Out of Stock"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(`/admin/products/edit/${t.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:()=>N(t.id,t.name||t.title),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(C,{size:18})})]})})]},t.id))})]})}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No products found"})]})]}),e.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:["Showing ",m.length," of ",o.length," products"]})]})}):null}export{M as default};
